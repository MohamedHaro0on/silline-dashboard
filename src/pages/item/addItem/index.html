<Grid container className={"mainContainer"}>
    <Grid item xs={11} lg={8} xl={10} justifyContent={"space-around"} bgcolor={"#fff"} borderRadius={"50px"} padding={{
        xs: 1, sm: 1, md: 2, lg: 3 }}>
        <Grid container margin={2} justifyContent={"center"} alignItems={"center"}>
            <Grid item xs={12} sm={12} lg={11} xl={10}>
                <Formik initialValues={{ ItemName: "" , Description: "" , Price: null, AllergyInfo: "" , Image: null,
                    CategoryID: "" , Adjustment: [], }} validationSchema={validationSchema} onSubmit={(data)=>
                    addItem(data)}
                    >
                    {({
                    values,
                    touched,
                    errors,
                    handleChange,
                    setFieldValue,
                    handleBlur,
                    handleSubmit,
                    }) => (
                    <Form>
                        <Typography variant="h4" gutterBottom>
                            {strings.addNewItem}
                        </Typography>
                        <Grid container alignItems="center" justifyContent={"center"} margin={1}>
                            <Grid item xs={8} sm={8} lg={12} className="left" justifyContent={"center"}
                                display={"flex"}>
                                <Box component="img" sx={{ maxWidth: "100%" , height: "300px" , }}
                                    alt="No orders to view" src={ touched.Image && values.Image ?
                                    URL.createObjectURL(values.Image) : NoImageAvailable } />
                            </Grid>
                            <Grid item xs={12} sm={12} lg={12}>
                                <Grid container padding={2} gap={{ xs: 0, sm: 0, md: 1, lg: 1 }}>
                                    <FormControl fullWidth>
                                        <Grid container>
                                            {inputs.map(
                                            ({ name, label, id, type, icon, options }) => {
                                            if (type !== "feildArray") {
                                            return (
                                            <Grid item xs={12} sm={12} md={6} key={name}>
                                                <Grid container>
                                                    <Grid item xs={2} sm={2} md={2} lg={1} display={"flex"}
                                                        justifyContent={"center"} alignItems={"center"}>
                                                        <Typography variant="h6" color={ touched[name] &&
                                                            Boolean(errors[name]) ? "#d32f2f" : "#FFB600" }>
                                                            {icon}
                                                        </Typography>
                                                    </Grid>
                                                    <Grid item xs={9} sm={9} lg={10} textAlign={"start"}>
                                                        <TextField key={name} placeholder={label} fullWidth id={id}
                                                            label={label} type={type} select={ type==="select" ? true :
                                                            false } name={name} margin="normal" onChange={ type==="file"
                                                            ? (e)=> {
                                                            setFieldValue(
                                                            "Image",
                                                            e.target.files[0]
                                                            );
                                                            }
                                                            : handleChange
                                                            }
                                                            onBlur={handleBlur}
                                                            error={
                                                            touched[name] &&
                                                            Boolean(errors[name])
                                                            }
                                                            >
                                                            {options &&
                                                            options.map(
                                                            ({
                                                            CategoryID,
                                                            CategoryName,
                                                            }) => (
                                                            <MenuItem key={CategoryID} value={CategoryID}>
                                                            {CategoryName}
                                                            </MenuItem>
                                                            )
                                                            )}
                                                        </TextField>

                                                        <Typography variant="p" fontSize={"15px"} textAlign={
                                                            lang==="ar" ? "right" : "left" } color={"#D32F2F"}>
                                                            {touched[name] && errors[name]}
                                                        </Typography>
                                                    </Grid>
                                                </Grid>
                                            </Grid>
                                            );
                                            } else {
                                            return (
                                            <FieldArray name="Adjustment">
                                                {({ insert, remove, push }) => (
                                                <div>
                                                    {values.Adjustment.length > 0 &&
                                                    values.Adjustment.map(
                                                    (
                                                    { title, adjustmentInfo },
                                                    index
                                                    ) => (
                                                    <Grid container key={index}>
                                                        <Grid item xs={12} sm={12} md={12} key={name}>
                                                            <Grid item xs={2} sm={2} md={2} lg={1} display={"flex"}
                                                                justifyContent={ "center" } alignItems={"center"}>
                                                                <Typography variant="h6" color={ touched[name] &&
                                                                    Boolean( errors[name] ) ? "#d32f2f" : "#FFB600" }>
                                                                    {icon}
                                                                </Typography>
                                                            </Grid>
                                                            <Grid item xs={9} sm={9} lg={12} textAlign={"start"}>
                                                                <TextField key={"title"} placeholder={"title"} fullWidth
                                                                    id={id} label={"title"} type={"text"} name={"title"}
                                                                    margin="normal" onBlur={handleBlur} error={
                                                                    touched.Adjustment && touched.Adjustment[ index ] &&
                                                                    touched.Adjustment[ index ].title && Boolean(
                                                                    errors.Adjustment[ index ] && errors .Adjustment[
                                                                    index ].title ) } />

                                                                <Typography variant="p" fontSize={"15px"} textAlign={
                                                                    lang==="ar" ? "right" : "left" } color={"#D32F2F"}>
                                                                    {touched.Adjustment &&
                                                                    touched.Adjustment[
                                                                    index
                                                                    ] &&
                                                                    touched.Adjustment[
                                                                    index
                                                                    ].title &&
                                                                    errors.Adjustment[
                                                                    index
                                                                    ] &&
                                                                    errors.Adjustment[
                                                                    index
                                                                    ].title}
                                                                </Typography>
                                                            </Grid>
                                                        </Grid>
                                                        <FieldArray name={`Adjustment[${index}].adjustmentInfo`}>
                                                            {({
                                                            insert,
                                                            remove,
                                                            push,
                                                            }) => (
                                                            <Grid container>
                                                                {values.adjustment[
                                                                index
                                                                ].adjustmentInfo
                                                                .length > 0 &&
                                                                values.adjustment[
                                                                index
                                                                ].adjustmentInfo.map(
                                                                (
                                                                {
                                                                label,
                                                                price,
                                                                },
                                                                adjustmentInfoIndex
                                                                ) => {
                                                                return (
                                                                <>
                                                                    <Grid item xs={12} sm={12} md={6} key={name}>
                                                                        <Grid item xs={2} sm={2} md={2} lg={1}
                                                                            display={ "flex" } justifyContent={ "center"
                                                                            } alignItems={ "center" }>
                                                                            <Typography variant="h6" color={ touched[
                                                                                name ] && Boolean( errors[ name ] )
                                                                                ? "#d32f2f" : "#FFB600" }>
                                                                                {icon}
                                                                            </Typography>
                                                                        </Grid>
                                                                        <Grid item xs={9} sm={9} lg={12}
                                                                            textAlign={ "start" }>
                                                                            <TextField key={ "price" }
                                                                                placeholder={ "Over Price" } fullWidth
                                                                                id={ id } label={ "Over Price" }
                                                                                type={ "number" } name={ "overPrice" }
                                                                                margin="normal" onBlur={ handleBlur }
                                                                                error={ touched.Adjustment && touched
                                                                                .Adjustment[ index ]
                                                                                .adjustmentInfo[adjustmentInfoIndex] &&
                                                                                touched .adjustment[ index ]
                                                                                .adjustmentInfo[ index ] .overPrice &&
                                                                                Boolean( errors .Adjustment[ index ] &&
                                                                                touched .Adjustment[ index ]
                                                                                .adjustmentInfo[ adjustmentInfoIndex ]
                                                                                .overPrice ) } />

                                                                            <Typography variant="p" fontSize={ "15px" }
                                                                                textAlign={ lang==="ar" ? "right"
                                                                                : "left" } color={ "#D32F2F" }>
                                                                                {touched.Adjustment &&
                                                                                touched
                                                                                .Adjustment[
                                                                                index
                                                                                ]
                                                                                .adjustmentInfo &&
                                                                                touched
                                                                                .Adjustment[
                                                                                index
                                                                                ]
                                                                                .adjustmentInfo[
                                                                                adjustmentInfoIndex
                                                                                ]
                                                                                .overPrice &&
                                                                                errors
                                                                                .adjustment[
                                                                                index
                                                                                ] &&
                                                                                touched
                                                                                .Adjustment[
                                                                                index
                                                                                ]
                                                                                .adjustmentInfo[
                                                                                adjustmentInfoIndex
                                                                                ]
                                                                                .overPrice}
                                                                            </Typography>


                                                                        </Grid>
                                                                    </Grid>
                                                                    <Grid item xs={12} sm={12} md={6} key={name}>
                                                                        <Grid item xs={2} sm={2} md={2} lg={1}
                                                                            display={ "flex" } justifyContent={ "center"
                                                                            } alignItems={ "center" }></Grid>
                                                                        <Grid item xs={9} sm={9} lg={12}
                                                                            textAlign={ "start" }>
                                                                            <TextField key={ "label" }
                                                                                placeholder={ "Label" } fullWidth id={
                                                                                id } label={ "Label" } type={ "text" }
                                                                                name={ "label" } margin="normal"
                                                                                onBlur={ handleBlur } error={
                                                                                touched.Adjustment && touched
                                                                                .Adjustment[ index ] .Adjustment &&
                                                                                touched .Adjustment[ index ]
                                                                                .adjustmentInfo[ adjustmentInfoIndex ]
                                                                                .label && Boolean( errors .Adjustment[
                                                                                index ] && touched .Adjustment[ index ]
                                                                                .adjustmentInfo[ adjustmentInfoIndex ]
                                                                                .label ) } />

                                                                            <Typography variant="p" fontSize={ "15px" }
                                                                                textAlign={ lang==="ar" ? "right"
                                                                                : "left" } color={ "#D32F2F" }>
                                                                                {touched.adjustment &&
                                                                                touched
                                                                                .Adjustment[
                                                                                index
                                                                                ]
                                                                                .adjustmentInfo &&
                                                                                touched
                                                                                .Adjustment[
                                                                                index
                                                                                ]
                                                                                .adjustmentInfo[
                                                                                adjustmentInfoIndex
                                                                                ]
                                                                                .label &&
                                                                                errors
                                                                                .Adjustment[
                                                                                index
                                                                                ] &&
                                                                                touched
                                                                                .Adjustment[
                                                                                index
                                                                                ]
                                                                                .adjustmentInfo[
                                                                                adjustmentInfoIndex
                                                                                ]
                                                                                .label}
                                                                            </Typography>
                                                                        </Grid>
                                                                    </Grid>
                                                                </>
                                                                );
                                                                }
                                                                )}
                                                                <Grid item xs={12} justifyContent={"end"}
                                                                    display={"flex"}>
                                                                    <Button type="button" className="secondary"
                                                                        onClick={()=> {
                                                                        let temp =
                                                                        values.adjustment.map(
                                                                        (el) => el
                                                                        );
                                                                        console.log(
                                                                        temp,
                                                                        index
                                                                        );
                                                                        temp[
                                                                        index
                                                                        ].adjustmentInfo.push(
                                                                        {
                                                                        overPrice:
                                                                        null,
                                                                        label: "",
                                                                        }
                                                                        );
                                                                        setFieldValue(
                                                                        "adjustment",
                                                                        temp
                                                                        );
                                                                        }}
                                                                        >
                                                                        Add adjustment
                                                                        options
                                                                    </Button>
                                                                    <Button type="button" color="error"
                                                                        variant="outlined" className="danger"
                                                                        onClick={()=>
                                                                        remove(index)
                                                                        }
                                                                        >
                                                                        X
                                                                    </Button>
                                                                </Grid>
                                                            </Grid>
                                                            )}
                                                        </FieldArray>
                                                    </Grid>
                                                    )
                                                    )}
                                                    <button type="button" className="secondary" onClick={()=>
                                                        push({
                                                        title: "",
                                                        adjustmentInfo: [
                                                        {
                                                        price: null,
                                                        label: "",
                                                        },
                                                        ],
                                                        })
                                                        }
                                                        >
                                                        Add adjustment
                                                    </button>
                                                </div>
                                                )}
                                            </FieldArray>
                                            );
                                            }
                                            }
                                            )}
                                        </Grid>
                                    </FormControl>
                                </Grid>
                            </Grid>
                        </Grid>
                        <Grid container>
                            <Grid item xs={12} md={12} xl={12} lg={12} justifyContent={"center"} display={"flex"}>
                                <Button variant="outlined" onClick={handleSubmit} padding={2} className="mainBtn"
                                    color="warning">
                                    {strings.submit}
                                </Button>
                            </Grid>
                        </Grid>
                    </Form>
                    )}
                </Formik>
            </Grid>
        </Grid>
    </Grid>
</Grid>